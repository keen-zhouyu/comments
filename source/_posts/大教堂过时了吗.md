< 大教堂与集市>里的大教堂


前些天，我们的朋友Tisonkun写了一篇《大教堂与集市》的读后，尤其将当下的开源与当时的观点交叉后全面生动地解读了雷蒙德写的这本关于开源的经典之作。于是，也引起了我再读此书的兴趣。每读每新，一个好的作者总能够回答很多问题，但一个卓越的作者却总能引出一些有趣的问题。雷蒙德在书中提出的很多话题，让我在这次的重读里对于”大教堂“这件事却也有了一些更新地认识。

《大教堂与集市》本是属于他文集中的一篇论文，雷蒙德又以该论文来命名全书，可见此文的重要性。事实上《大教堂与集市》作为开源运动的经典流传，一方面是ESR对于开源的研究和深刻洞见，另一方面，ESR在书中无疑是提出了很多有关开源地独特见解。同时，作为一个很会讲故事的作者，他以“大教堂”来寓意软件工程中的集中开发模式，以“集市”来寓意开源的分布式开发模式，然后通过对这两者的比较，推导出了开源的集市模式是对于传统软件工程的一种颠覆，“大教堂”所代表的集中式开发则是已经相对落伍的模式，而集市所代表的开源是一种更先进的模式。作为一个开源的布道者，在这点上，他确实是高明的，尤其是他能以“大教堂”和“集市”这两个鲜明的比喻来说明两者间的差异。正因为让许多人一下子记住了“大教堂”与“集市”，也从而让很多人熟悉了开源的模式的独特性和创新性。
 
但，可能很多人不知道的是，用“大教堂”对应了传统的软件工程开发，其实并不是由雷蒙德最先想到的。“大教堂”一词实际上最早是出自于软件工程的经典之作《人月神话》的第四章。而此书的作者是小弗雷德里克.布鲁克斯，他被业界称为IBM360系统之父，美国计算机协会（ACM） 赞誉他对计算机体系结构，操作系统和软件工程做出了里程碑式的贡献。

如果仔细读过《人与神话》的读者一眼可以看出，雷蒙德在他文章中对于大型软件工程的复杂度的阐述显然是受到了布鲁克斯的启发和影响。这无论从他书里引用和转述的内容，还是书的风格，都无处不在地出现着布鲁克斯的影子。一方面他基于布鲁克斯的观点提出了开源集市模式的新观点，另一方面也体现着他对老一代软件人的致敬和尊重。甚至于书的封面，我猜测就是为了致敬老一代软件人的一个彩蛋。因为布鲁克斯作为老一代科技写作者，他在《人月神话》 中的写作特色就是在每个章节前都会引用一句他所钟意的名言和名画来开场。而《大教堂与集市》的封面画是引用了雷蒙德自己所喜欢的俄罗斯画家柳博芙.波波娃的以立体主义和未来主义相结合的著名画作《以图构图》（composition with figures）。

  

不过，话说回来。再回头去阅读《人月神话》后，我却意外发现了另外一个有趣的事实。布鲁克斯说的大教堂其实并不是在说软件工程集中式开发管理地复杂，准确一点说，Brooks其实是在讲软件工程里另外一件非常重要的事情：软件设计的概念完整性和设计的一致性。

而这点却是无论集中模式还是开源模式，只要涉及软件开发，都无法予以忽略和忽视。如果我们只是简单地按照雷蒙德给我们灌输地观念去理解大教堂模式的落伍，集市模式的先进，那么无疑是具有片面性和局限性的， 这也会阻碍我们更好地去理解开源的本质。 


那就让我们先来看看brooks在《人月神话里》的大教堂。

首先，Brooks的“大教堂”不只是一个比喻，而是有个真实的大教堂故事。 他在第二章的开始就讲述了那个真正的兰斯大教堂，一座位于法国兰斯（Reims）的大教堂。

 

百度百科里是这样记载的：

兰斯位于法国东北部香槟-阿登大区的马恩省，是法国的历史文化名城素有“加冕之城”的美誉，历任法国国王加冕之处的兰斯圣母大教堂（Cathedral Notre-Dame de Reims），它在法国的作用相当于英国的威斯敏斯特教堂，巴黎圣母院亦是仿照其建造。13世纪新建筑工艺的出色应用以及雕像装饰与建筑的完美结合，使兰斯圣母大教堂成了哥特式建筑的杰作之一。 1991年，根据文化遗产遴选依据标准(i)(ii)(iv)，兰斯的圣母大教堂，原圣勒弥修道院和塔乌宫被联合国教科文组织世界遗产委员会批准作为文化遗产列入《世界遗产名录》。

兰斯大教堂的神奇之处是在历经8代设计师和建筑的过程中，整座教堂令人出乎意料的在建筑风格上保持了完美的一致性。这个和欧洲其他的一些大教堂形成了鲜明的对比，因为一般性的欧洲教堂，由不同时代不同建筑师分不同的时期来建造，由于每个建筑师出于自己的想法和创作意图，后面的建筑师往往为了出于提高和反映自己的风格及体现个人品味，导致教堂在设计和结构风格上存在许多差异。 所以，经常会出现哥特式的教堂里依附诺曼底风格的十字架等，在显示了上帝荣耀的同时也彰显了建筑师的独特。虽然它们的独特性也为人称道。但兰斯教堂却以出奇的概念完整性和设计的一致性让人们赞叹。而这个背后就是参与设计和建造的8代建筑师对于自我的要求和牺牲，以严格的约束自己放弃掉那些可能拥有的独特创意，来最终保持了教堂设计的纯粹性。

想来Brooks应该是实地去参观过这座教堂后，被兰斯大教堂的建筑风格所震撼，并由此联想到了软件设计中概念的完整性和连贯性问题。 一个软件的设计开发虽然现在无需经历几代人，但同一个软件任务经常会由不同的软件工程师来完成。Brooks坚持认为对于软件开发设计中，概念的完整性和设计的连贯性是极其重要的因素。因为软件概念完整性和设计一致性的好处非常明显，对于开发人员来说是让软件更加容易开发，对于用户来说是更加容易使用。所以，软件应当像兰斯大教堂那样的被开发建造出来。

对于如何保证， 而项目的有效组织和管理则将有助于保证概念完整性和一致性。Brooks在当时有见地的提出了概念的完整性要求设计必须由一个人，或者非常少数互有默契的人员来实现。一个成功的软件系统，如果是一个人主导的，那么会很大程度上依赖于最初设计者的全局观和天才，后续的建设者则需要放弃部分自己的想法和个性，来延续设计的完整性， 


在《人月神话》20年周年的纪念版的补充章节中，布鲁克斯又再次确信和重申了他对于软件设计的概念完整性的几个重要观点的坚持：
1.	概念完整性是软件系统设计中最重要的考虑因素
2.	为了获得概念的完整性，设计必须由一个人或者具有共识的小型团队来完成
3.	纪律和规则是有意的，外部的体系机构规定实际上是加强而不是限制实现小组的创造性。
4.	体系结构，设计实现，物理实现的许多工作可以并行

布鲁克斯的这个观点在20世纪70年代中期被提出，直到纪念《人月神话》四十周年的中文版发行时，事实上依然在被行业的实践证明是有效的。

诚然，传统的集中式软件的开发管理是复杂的，但进一步讲，开源软件的开发管理难道就没有复杂度了吗？ 一个优秀的开源软件，能从一个或者几个爱好者的级别开始 再上升到社区里不同人员参与贡献的程度，实际上也必将经历从不需要管理再到管理复杂的程度。否则，林纳斯也不会在开发了Linux之后，再去专门开发了一个管理Linux开发的开源软件Git。而也正由Git开源社区的发展, 产生了如Github,GitLab和中国的Gitee等开源代码托管和开发协作平台才撑起了开源开发管理的江山。 所以，从软件项目的管理而言，只不过是原来集中式软件项目管理的难度变成了开源社区集市模式下的开发管理和治理难度。 难度系数实际上是不会比传统集中式开发小多少的。 我们不能因为雷蒙德将集市模式比作对于大教堂的替代而想像成两者之间的对立关系。集市模式里大教堂依然具有存在的必要性和重要性。关于这个观点，《大教堂与集市》的中文版译者卫剑钒也在其 《在开源的7大理念》和<每个人都是一座教堂》都有提及，并客观的指出网络组织下的并发无序开发未必就能够成为一种有效的开发方法，
(卫sir)这很像是一大群能工巧匠（包括一些建筑公司的团队），不管出自何种利益考虑，为了一个共同的目标，从世界各地自发参加一个大教堂群的设计和建设，Linux内核就是这样一个大教堂群，每个子系统都是一个大教堂，每个大教堂都有着负责设计和建造的领导人，其下有有着数百名建造高手，他们在共识和规则之下，使用着像git、gcc、邮件列表这样的设计、建造和协同工具，利用集体的力量（他们会讨论，也会投票），把这些美轮美奂的大教堂建造出来。Linus作为最高领导人，不会强制他们，更不会发薪水，一切都是这些高手自发自愿自带干粮，不管是个人还是公司。集市模式和大教堂模式的本质区别只是在于：前者是自发的，也是自治的。

雷蒙德在《大教堂与集市》中将“大教堂”作为了一个相比开源的集市开发模式出现的落后模式的代表性词汇，让全世界的程序员知道了大教堂与集市的差别，当然也没有什么大错，但却忽略了“大教堂”般软件开发工程中代表着软件开发中本质的一些观点和概念实际上并不会因为开源的集市模式出现而落伍或者。恰好相反，如软件概念的完整性和设计的一致性等，依然是一个优秀的开源软件所应具备的特性。

开源一种新型的软件开发模式，在资源的组织上和开发协作上的确有其先进性和创新性。但无论开源软件还是商业专有软件的开发，只要是软件，就有软件本身内在的一些本质特性需要遵循，而我们需要了解的是，这些特性未必会因为开源模式而改变。同样，随着开源热潮和社区的不断兴起，各种开源力量的参与社区贡献和社区治理，我们与其争论开源社区在各种模式下的合理性或者先进性，不如去专注于那些属于开源真正应有的内在特性，可能更会让开源发扬光大。

